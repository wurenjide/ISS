
//引入antd全局样式
import "antd/dist/reset.css";
import style from "./index.module.scss";
import React, { useEffect, useState } from 'react';
import AttMan from "./AttMan";
import Store from "./Store";
import AdminHome from "./Home";
import { Routes, Route, useRoutes, useNavigate, useLocation } from 'react-router-dom';
import routes from '../../router'
import {
  MenuFoldOutlined,
  MenuUnfoldOutlined,
  UploadOutlined,
  HomeOutlined,
  VideoCameraOutlined,
  CalendarOutlined,
  ScheduleOutlined,
  SolutionOutlined,
  CarryOutOutlined,
} from '@ant-design/icons';
import { Layout, Menu, theme, Button, Dropdown, message, Space, Image } from 'antd';
import LeaveMan from "./LeaveMan";
import Raudit from "./Raudit";
import ScheduleMan from "./ScheduleMan";
import Staff from "./Staff";
import ScheduleRule from "./ScheduleRule";
import PersonAd from "./PersonAd";
const { Header, Sider, Content } = Layout;
const Admin = () => {
  const navigate = useNavigate();
  const locaation = useLocation();
  const { pathname, from } = locaation;
  const [collapsed, setCollapsed] = useState(true);
  const [menukey, setMenukey] = useState([])
  const {
    token: { colorBgContainer },
  } = theme.useToken();
  const items = [

    {
      label: '个人中心',
      key: '/admin/personad',
    },
    {
      label: '退出系统',
      key: '/quit',
    },
  ];
  useState(() => {
    if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {

    }
    setMenukey([pathname])
  })
  useEffect(() => {
    setMenukey([pathname])
  }, [pathname]);
  const handleRouter = (e) => {
    if (e.key == "/quit") {
      localStorage.clear()
      navigate("/login")
    } else {
      navigate(e.key)
    }
  }
  const handleMenuClick = (e) => {
    if (e.key == "/quit") {
      localStorage.clear()
      navigate("/login")
    } else {
      setMenukey([e.key])
      navigate(e.key)
    }
  };
  const menuProps = {
    items,
    onClick: handleMenuClick,
  };
  return (
    <div className={style["body"]}>
      <Layout style={{backgroundColor: "linear-gradient(300deg, #fdfbfb 0%, #ebedee 100%)",backgroundColor:"rgb(0,0,0,0)"}}>
        <Sider trigger={null} collapsible collapsed={collapsed}
          theme="light"
          className={style["backcolor"]}
          style={{
            overflow: 'auto',
            height: '100vh',
            position: 'sticky',
            top: 0,
            left: 0,
            bottom: 0,
            zIndex: 10,
            backgroundImage: "linear-gradient(45deg, #93a5cf 0%, #e4efe9 100%)",
          }}
        >
          <div className={style["logo"]}>
            <Image src="../../assets.aa.png" />
          </div>
          <Menu
            mode="inline"
            defaultSelectedKeys={['/admin']}
            style={{
              top: 0,
              background: "rgba(220,38,38,0)",
            }}
            items={[
              {
                key: '/admin',
                icon: <svg t="1680006836088" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7191" width="16" height="16"><path d="M923.733333 394.666667c-85.333333-70.4-206.933333-174.933333-362.666666-309.333334C533.333333 61.866667 490.666667 61.866667 462.933333 85.333333c-155.733333 134.4-277.333333 238.933333-362.666666 309.333334-14.933333 14.933333-25.6 34.133333-25.6 53.333333 0 38.4 32 70.4 70.4 70.4H192v358.4c0 29.866667 23.466667 53.333333 53.333333 53.333333H405.333333c29.866667 0 53.333333-23.466667 53.333334-53.333333v-206.933333h106.666666v206.933333c0 29.866667 23.466667 53.333333 53.333334 53.333333h160c29.866667 0 53.333333-23.466667 53.333333-53.333333V518.4h46.933333c38.4 0 70.4-32 70.4-70.4 0-21.333333-10.666667-40.533333-25.6-53.333333z m-44.8 59.733333h-57.6c-29.866667 0-53.333333 23.466667-53.333333 53.333333v358.4h-138.666667V661.333333c0-29.866667-23.466667-53.333333-53.333333-53.333333h-128c-29.866667 0-53.333333 23.466667-53.333333 53.333333v206.933334H256V507.733333c0-29.866667-23.466667-53.333333-53.333333-53.333333H145.066667c-4.266667 0-6.4-2.133333-6.4-6.4 0-2.133333 2.133333-4.266667 2.133333-6.4 85.333333-70.4 206.933333-174.933333 362.666667-309.333333 4.266667-4.266667 10.666667-4.266667 14.933333 0 155.733333 134.4 277.333333 238.933333 362.666667 309.333333 2.133333 2.133333 2.133333 2.133333 2.133333 4.266667 2.133333 6.4-2.133333 8.533333-4.266667 8.533333z" fill="#2c2c2c" p-id="7192"></path></svg>,
                label: '首页',
              },
              {
                key: '/admin/attman',
                icon: <svg t="1680006907188" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7451" width="16" height="16"><path d="M874.666667 501.333333c-17.066667 0-32 14.933333-32 32v298.666667c0 6.4-4.266667 10.666667-10.666667 10.666667H192c-6.4 0-10.666667-4.266667-10.666667-10.666667V192c0-6.4 4.266667-10.666667 10.666667-10.666667h469.333333c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32H192C151.466667 117.333333 117.333333 151.466667 117.333333 192v640c0 40.533333 34.133333 74.666667 74.666667 74.666667h640c40.533333 0 74.666667-34.133333 74.666667-74.666667V533.333333c0-17.066667-14.933333-32-32-32z" fill="#2c2c2c" p-id="7452"></path><path d="M940.8 168.533333c-12.8-12.8-32-12.8-44.8 0l-390.4 384-106.666667-106.666666c-12.8-12.8-32-12.8-44.8 0-12.8 12.8-12.8 32 0 44.8l130.133334 128c6.4 6.4 14.933333 8.533333 23.466666 8.533333s17.066667-2.133333 23.466667-8.533333l411.733333-405.333334c8.533333-10.666667 10.666667-32-2.133333-44.8z" fill="#2c2c2c" p-id="7453"></path></svg>,
                label: '考勤管理',
              },
              {
                key: '/admin/store',
                icon: <svg t="1680007026102" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9889" width="16" height="16"><path d="M854.053 611.89v195.022c0 52.784-42.79 95.573-95.573 95.573H258.187c-52.784 0-95.574-42.79-95.574-95.573V632.149h60.075v174.763c0 19.605 15.893 35.499 35.499 35.499H758.48c19.605 0 35.499-15.894 35.499-35.499V611.89h60.074zM749.591 121.515c34.402 0 65.383 20.82 78.378 52.674l64.33 157.679c24.093 59.056 17.401 126.21-17.873 179.35-35.597 53.625-103.501 75.577-163.753 52.937l-83.831-31.5-45.709 25.75c-45.09 25.402-100.157 25.485-145.324 0.216l-45.28-25.331-56.944 26.227c-54.026 24.883-117.886 12.772-159.05-30.163l-12.193-12.719c-48.457-50.542-61.811-125.245-33.867-189.445l67.385-154.809c13.445-30.89 43.927-50.866 77.616-50.866h476.115z m0 60.074H273.476c-9.78 0-18.63 5.8-22.534 14.768l-67.384 154.81c-18.275 41.985-9.542 90.84 22.148 123.894l12.194 12.718c23.436 24.445 59.794 31.34 90.553 17.173l65.782-30.298a40.96 40.96 0 0 1 37.133 1.457l53.772 30.083a88.356 88.356 0 0 0 86.506-0.13l53.473-30.124a40.96 40.96 0 0 1 34.512-2.656l92.173 34.635c34.06 12.798 72.447 0.39 92.57-29.926a132.61 132.61 0 0 0 12.301-123.432l-64.33-157.68a24.576 24.576 0 0 0-22.754-15.292z" fill="#191F39" p-id="9890"></path></svg>,
                label: '门店管理',
              },
              {
                key: '/admin/leaveman',
                icon: <svg t="1680007141963" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12115" width="16" height="16"><path d="M668.4 640.7l24 5.6c-2.6 11.3-5.7 22.3-9.1 33.1v151h-24v-91.1c-3.9 7.8-7.9 15.4-12.2 22.9-1.3-8.1-3.5-19.4-6.6-34 12.4-26.4 21.7-55.6 27.9-87.5z m80.5 114.9h-28.6v13.1h33.2v22.8h-33.2v39h-24V647h60.1v69.5h-36.1v16.2h28.6v22.9zM736 693.8v-24h-15.6v24H736z m16.4 33h71.5v17c-2.7 19.2-9.1 35.8-19.1 49.8 7.5 6.4 16.6 11.8 27.2 16.2-4.4 6.6-9.7 13.5-15.8 20.9-10.4-5.8-19.4-12.5-27-20-9.1 8-19.9 14.9-32.5 20.6-3.6-5-9-10.8-16.2-17.2 13.6-6.2 24.8-13.3 33.7-21.4-8.4-12.9-13.9-27.6-16.5-44.2h-5.2v-21.7z m10.1-78.2h59.9v66.3h-59.9V692H798v-20.7h-35.5v-22.7z m36.1 99.9h-19.7c1.8 9.9 5.1 18.7 9.9 26.7 5-8.2 8.3-17.1 9.8-26.7zM608.9 288H225.6c-17.6 0-31.9-14.3-31.9-32s14.3-32 31.9-32H609c17.6 0 31.9 14.3 31.9 32s-14.3 32-32 32zM608.9 480H225.6c-17.6 0-31.9-14.3-31.9-32s14.3-32 31.9-32H609c17.6 0 31.9 14.3 31.9 32s-14.3 32-32 32zM417.3 672H225.6c-17.6 0-31.9-14.3-31.9-32s14.3-32 31.9-32h191.7c17.6 0 31.9 14.3 31.9 32s-14.3 32-31.9 32z" p-id="12116" fill="#2c2c2c"></path><path d="M736.6 576c42.6 0 82.7 16.6 112.8 46.9 30.1 30.2 46.7 70.4 46.7 113.1 0 42.7-16.6 82.9-46.7 113.1-30.1 30.2-70.2 46.9-112.8 46.9s-82.7-16.6-112.8-46.9c-30.1-30.2-46.7-70.4-46.7-113.1 0-42.7 16.6-82.9 46.7-113.1C653.9 592.6 694 576 736.6 576m0-64c-123.4 0-223.4 100.3-223.4 224s100 224 223.4 224S960 859.7 960 736 860 512 736.6 512z" p-id="12117" fill="#2c2c2c"></path><path d="M159.7 832c-17.6 0-31.9-14.3-31.9-32V160c0-17.7 14.3-32 31.9-32h513.6c17.6 0 31.9 14.3 31.9 32v256c0 17.7 14.3 32 31.9 32 17.6 0 31.9-14.3 31.9-32V128c0-35.3-28.6-64-63.8-64H127.8C92.6 64 64 92.7 64 128v704c0 35.3 28.6 64 63.8 64h353.5c17.6 0 31.9-14.3 31.9-32s-14.3-32-31.9-32H159.7z" p-id="12118" fill="#2c2c2c"></path></svg>,
                label: "请假管理",
              },
              {
                key: "/admin/raudit",
                icon: <svg t="1680007598397" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="22465" width="16" height="16"><path d="M632.555 583.662a334.724 334.724 0 0 1 34.43 15.764c13.844 7.312 19.14 24.463 11.828 38.308-7.312 13.845-24.463 19.14-38.308 11.829-39.825-21.033-84.256-32.18-130.354-32.18-134.46 0-249.156 95.628-274.315 225.944-2.968 15.373-17.837 25.43-33.21 22.462-15.374-2.968-25.43-17.837-22.462-33.21 22.237-115.181 102.51-207.796 207.629-248.892-76.518-42.868-128.233-124.698-128.233-218.602 0-138.316 112.198-250.435 250.592-250.435 138.392 0 250.59 112.12 250.59 250.435 0 93.886-51.695 175.702-128.187 218.577z m71.487-218.577c0-106.992-86.804-193.735-193.89-193.735-107.088 0-193.892 86.742-193.892 193.735 0 106.992 86.804 193.734 193.892 193.734 107.086 0 193.89-86.743 193.89-193.734z m12.694 346.77V626.83a28.26 28.26 0 0 1 3.87-14.324 28.468 28.468 0 0 1 10.175-10.174 28.26 28.26 0 0 1 14.324-3.87 28.26 28.26 0 0 1 14.324 3.87 28.468 28.468 0 0 1 10.174 10.174 28.26 28.26 0 0 1 3.87 14.324v85.025h84.179c15.656 0 28.348 12.692 28.348 28.349 0 15.656-12.692 28.348-28.348 28.348h-84.18v84.08a28.26 28.26 0 0 1-3.87 14.324 28.468 28.468 0 0 1-10.173 10.174 28.26 28.26 0 0 1-14.324 3.87 28.26 28.26 0 0 1-14.324-3.87 28.468 28.468 0 0 1-10.175-10.174 28.26 28.26 0 0 1-3.87-14.324v-84.08h-85.124c-15.656 0-28.348-12.692-28.348-28.348 0-15.657 12.692-28.349 28.348-28.349h85.124z" fill="#2c2c2c" p-id="22466"></path></svg>,
                label: "员工注册审核",
              },
              {
                key: "/admin/schedulem",
                icon: <svg t="1680007566187" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21282" width="16" height="16"><path d="M959.825 384.002V191.94c0-70.692-57.308-128-128-128H191.94c-70.692 0-128 57.308-128 128v639.885c0 70.692 57.308 128 128 128h639.885c70.692 0 128-57.308 128-128V384.002z m-813.16-237.337a63.738 63.738 0 0 1 45.336-18.785H832a63.962 63.962 0 0 1 63.886 64.121v128.061H127.88v-128.06a63.738 63.738 0 0 1 18.785-45.337z m269.127 461.308v-223.97h192.181v223.97H415.792z m192.181 63.94v223.972H415.792V671.914h192.181z m-256.121-63.94H127.88v-223.97h223.972v223.97zM146.665 877.21a63.467 63.467 0 0 1-18.785-45.21V671.914h223.972v223.97h-159.85a63.626 63.626 0 0 1-45.337-18.675z m749.22-45.21a63.763 63.763 0 0 1-63.886 63.886H671.914V671.914h223.97v160.085z m0-224.026H671.914v-223.97h223.97v223.97z" p-id="21283" fill="#2c2c2c"></path></svg>,
                label: "排班表管理",
                children: [
                  {
                    key: "/admin/scheduleman",
                    label: "排班表编辑",
                  },
                  {
                    key: "/admin/schedulerule",
                    label: "排班规则管理",
                  },
                ]
              },
              {
                key: "/admin/staff",
                icon: <svg t="1680007222262" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14447" width="16" height="16"><path d="M874.9 577.3c-26.1-27.2-56.8-48.9-90.3-64.1 5.4-4.6 10.6-9.6 15.5-14.8 32.3-34.7 50.1-79.8 50.1-127.2 0-102.9-83.7-186.7-186.7-186.7-11 0-21.8 0.9-32.5 2.8-7.1-9.6-14.9-18.7-23.4-27.2-44.6-44.6-103.9-69.2-167-69.2s-122.4 24.6-167 69.2-69.2 103.9-69.2 167 24.6 122.4 69.2 167c10.8 10.8 22.4 20.4 34.8 28.7-4.9 1.8-9.7 3.8-14.5 5.8-44.9 19-85.2 46.2-119.9 80.8-34.6 34.6-61.8 75-80.8 119.9-19.7 46.5-29.6 95.9-29.6 146.8 0 17.7 1.2 35.5 3.7 52.9l69.3-9.7c-2-14.2-3-28.7-3-43.1 0-169.4 137.8-307.1 307.1-307.1s307.1 137.8 307.1 307.1c0 14.4-1 28.9-3 43.1l69.3 9.7c2.4-17.4 3.7-35.2 3.7-52.9 0-50.9-10-100.3-29.6-146.8-19-44.9-46.2-85.2-80.8-119.9-34.6-34.6-74.9-61.8-119.9-80.8-4.8-2-9.7-4-14.6-5.8 12.3-8.4 24-18 34.8-28.7 44.6-44.6 69.2-103.9 69.2-167 0-25-3.9-49.4-11.3-72.6 63.4 1.1 114.7 53 114.7 116.6 0 45.5-26.6 85.6-65.3 104.7-16.3 8.1-26.8 24.4-26.8 42.6v1c0 21.2 14.1 40 34.6 45.5 94.9 25.8 163.8 112.4 163.8 215 0 10.5-0.7 21-2.2 31.3l69.3 9.7c1.9-13.5 2.9-27.3 2.9-41-0.1-75.8-29.1-147.8-81.7-202.6z m-434.3-84c-91.6 0-166.2-74.6-166.2-166.2S349 160.9 440.6 160.9s166.2 74.6 166.2 166.2-74.5 166.2-166.2 166.2z" p-id="14448" fill="#2c2c2c"></path></svg>,
                label: "员工管理"
              },
              {
                key: "/admin/loveman",
                icon:<svg t="1680007404176" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18137" width="16" height="16"><path d="M667.786667 117.333333C832.864 117.333333 938.666667 249.706667 938.666667 427.861333c0 138.250667-125.098667 290.506667-371.573334 461.589334a96.768 96.768 0 0 1-110.186666 0C210.432 718.368 85.333333 566.112 85.333333 427.861333 85.333333 249.706667 191.136 117.333333 356.213333 117.333333c59.616 0 100.053333 20.832 155.786667 68.096C567.744 138.176 608.170667 117.333333 667.786667 117.333333z m0 63.146667c-41.44 0-70.261333 15.189333-116.96 55.04-2.165333 1.845333-14.4 12.373333-17.941334 15.381333a32.32 32.32 0 0 1-41.770666 0c-3.541333-3.018667-15.776-13.536-17.941334-15.381333-46.698667-39.850667-75.52-55.04-116.96-55.04C230.186667 180.48 149.333333 281.258667 149.333333 426.698667 149.333333 537.6 262.858667 675.242667 493.632 834.826667a32.352 32.352 0 0 0 36.736 0C761.141333 675.253333 874.666667 537.6 874.666667 426.698667c0-145.44-80.853333-246.218667-206.88-246.218667z" fill="#000000" p-id="18138"></path></svg>,
                label: "员工关怀",
              },
            ]}
            selectedKeys={menukey}
            onClick={handleRouter}
          />
        </Sider>
        <Layout className="site-layout" style={{ minWidth: 1319.2, }}>
          <Header
            style={{
              padding: 0,
              background: "white",
              position: 'sticky',
              top: 0,
              zIndex: 9,
            }}
          >
            {React.createElement(collapsed ? MenuUnfoldOutlined : MenuFoldOutlined, {
              className: style["trigger"],
              onClick: () => setCollapsed(!collapsed),
            })}
            智能排班系统
            <Space wrap style={{ float: "right", marginRight: "20px" }}>
              <Dropdown menu={menuProps}>
                <Button>
                  <Space>
                    用户名
                  </Space>
                </Button>
              </Dropdown>
            </Space>
          </Header>
          <Content
            style={{
              margin: '24px 16px',
              padding: 24,
              minHeight: 280,
              minWidth: 1287.2,
              // background: colorBgContainer,
            }}
          >
            <Routes>
              <Route path="/" element={<AdminHome />} />
              <Route path='attman' element={<AttMan />} />
              <Route path='store' element={<Store />} />
              <Route path="leaveman" element={<LeaveMan />} />
              <Route path="raudit" element={<Raudit />} />
              <Route path="scheduleman" element={<ScheduleMan />} />
              <Route path="schedulerule" element={<ScheduleRule />} />
              <Route path="staff" element={<Staff />} />
              <Route path="personad" element={<PersonAd />} />
            </Routes>
          </Content>
        </Layout>
      </Layout>
    </div>

  );
};
export default Admin;